<!-- Generated by SpecStory, Markdown v2.1.0 -->

<!-- vscode Session f0c9ff34-1a94-4f3e-a6ca-38f484ca858d (2025-12-07 13:07Z) -->

# 创建 Vue frame provider 的 stories 示例 (2025-12-07 13:07Z)

_**User (2025-12-07 13:19Z)**_

帮我写一下 packages/vue/src/providers/frame 的stories 例子我都已经写在 packages/vue/src/providers/frame/examples 中了

---

_**Agent (model copilot/claude-opus-4.5)**_

<tool-use data-tool-type="unknown" data-tool-name="copilot_listDirectory">
<details>
<summary>Tool use: **copilot_listDirectory**</summary>


Parameters:

```json
{
  "file_path": "Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/frame",
  "relativeWorkspacePath": "frame"
}
```
Additional data:

```json
{
  "vscodeToolId": "copilot_listDirectory",
  "isHidden": false
}
```
Result:

```json
{
  "invocationMessage": "正在读取 [](file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/frame)",
  "pastTenseMessage": "读取 [](file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/frame)",
  "isConfirmed": {
    "type": 1
  },
  "content": "",
  "textEditContent": "",
  "toolCallResult": null
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="copilot_listDirectory">
<details>
<summary>Tool use: **copilot_listDirectory**</summary>


Parameters:

```json
{
  "file_path": "Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/frame/examples",
  "relativeWorkspacePath": "examples"
}
```
Additional data:

```json
{
  "vscodeToolId": "copilot_listDirectory",
  "isHidden": false
}
```
Result:

```json
{
  "invocationMessage": "正在读取 [](file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/frame/examples)",
  "pastTenseMessage": "读取 [](file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/frame/examples)",
  "isConfirmed": {
    "type": 1
  },
  "content": "",
  "textEditContent": "",
  "toolCallResult": null
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="copilot_readFile">
<details>
<summary>Tool use: **copilot_readFile** • 正在读取 [](file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/frame/examples/Basic.vue)</summary>


读取 [](file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/frame/examples/Basic.vue)

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="copilot_readFile">
<details>
<summary>Tool use: **copilot_readFile** • 正在读取 [](file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/frame/examples/Script.vue)</summary>


读取 [](file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/frame/examples/Script.vue)

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="copilot_readFile">
<details>
<summary>Tool use: **copilot_readFile** • 正在读取 [](file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/frame/index.ts)</summary>


读取 [](file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/frame/index.ts)

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="copilot_findFiles">
<details>
<summary>Tool use: **copilot_findFiles**</summary>

Additional data:

```json
{
  "vscodeToolId": "copilot_findFiles",
  "isHidden": false
}
```
Result:

```json
{
  "invocationMessage": "正在搜索与 &#96;**/stories/*.stories.ts&#96; 匹配的文件",
  "pastTenseMessage": "搜索与 &#96;**/stories/*.stories.ts&#96; 匹配的文件，11 匹配项",
  "resultDetails": [
    {
      "$mid": 1,
      "fsPath": "/Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/components/clipboard/stories/clipboard.stories.ts",
      "external": "file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/components/clipboard/stories/clipboard.stories.ts",
      "path": "/Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/components/clipboard/stories/clipboard.stories.ts",
      "scheme": "file"
    },
    {
      "$mid": 1,
      "fsPath": "/Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/components/avatar/stories/avatar.stories.ts",
      "external": "file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/components/avatar/stories/avatar.stories.ts",
      "path": "/Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/components/avatar/stories/avatar.stories.ts",
      "scheme": "file"
    },
    {
      "$mid": 1,
      "fsPath": "/Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/components/collapsible/stories/collapsible.stories.ts",
      "external": "file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/components/collapsible/stories/collapsible.stories.ts",
      "path": "/Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/components/collapsible/stories/collapsible.stories.ts",
      "scheme": "file"
    },
    {
      "$mid": 1,
      "fsPath": "/Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/components/carousel/stories/carousel.stories.ts",
      "external": "file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/components/carousel/stories/carousel.stories.ts",
      "path": "/Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/components/carousel/stories/carousel.stories.ts",
      "scheme": "file"
    },
    {
      "$mid": 1,
      "fsPath": "/Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/components/checkbox/stories/checkbox.stories.ts",
      "external": "file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/components/checkbox/stories/checkbox.stories.ts",
      "path": "/Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/components/checkbox/stories/checkbox.stories.ts",
      "scheme": "file"
    },
    {
      "$mid": 1,
      "fsPath": "/Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/components/field/stories/field.stories.ts",
      "external": "file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/components/field/stories/field.stories.ts",
      "path": "/Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/components/field/stories/field.stories.ts",
      "scheme": "file"
    },
    {
      "$mid": 1,
      "fsPath": "/Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/components/collapse/stories/collapse.stories.ts",
      "external": "file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/components/collapse/stories/collapse.stories.ts",
      "path": "/Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/components/collapse/stories/collapse.stories.ts",
      "scheme": "file"
    },
    {
      "$mid": 1,
      "fsPath": "/Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/components/presence/stories/presence.stories.ts",
      "external": "file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/components/presence/stories/presence.stories.ts",
      "path": "/Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/components/presence/stories/presence.stories.ts",
      "scheme": "file"
    },
    {
      "$mid": 1,
      "fsPath": "/Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/focus-trap/stories/focus-trap.stories.ts",
      "external": "file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/focus-trap/stories/focus-trap.stories.ts",
      "path": "/Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/focus-trap/stories/focus-trap.stories.ts",
      "scheme": "file"
    },
    {
      "$mid": 1,
      "fsPath": "/Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/format/stories/format.stories.ts",
      "external": "file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/format/stories/format.stories.ts",
      "path": "/Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/format/stories/format.stories.ts",
      "scheme": "file"
    },
    {
      "$mid": 1,
      "fsPath": "/Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/environment/stories/environment.stories.ts",
      "external": "file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/environment/stories/environment.stories.ts",
      "path": "/Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/environment/stories/environment.stories.ts",
      "scheme": "file"
    }
  ],
  "isConfirmed": {
    "type": 1
  },
  "content": "",
  "textEditContent": "",
  "toolCallResult": null
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="copilot_readFile">
<details>
<summary>Tool use: **copilot_readFile** • 正在读取 [](file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/environment/stories/environment.stories.ts)</summary>


读取 [](file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/environment/stories/environment.stories.ts)

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="copilot_readFile">
<details>
<summary>Tool use: **copilot_readFile** • 正在读取 [](file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/format/stories/format.stories.ts#1-1)，行 1 到 50</summary>


读取 [](file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/format/stories/format.stories.ts#1-1)，行 1 到 50

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="copilot_createDirectory">
<details>
<summary>Tool use: **copilot_createDirectory**</summary>


Parameters:

```json
{
  "file_path": "Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/frame/stories",
  "relativeWorkspacePath": "stories"
}
```
Additional data:

```json
{
  "vscodeToolId": "copilot_createDirectory",
  "isHidden": false
}
```
Result:

```json
{
  "invocationMessage": "正在创建 [](file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/frame/stories)",
  "pastTenseMessage": "已创建 [](file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/frame/stories)",
  "isConfirmed": {
    "type": 1
  },
  "content": "",
  "textEditContent": "",
  "toolCallResult": null
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="copilot_createFile">
<details>
<summary>Tool use: **copilot_createFile**</summary>


Parameters:

```json
{
  "file_path": "/Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/frame/stories/frame.stories.ts",
  "relativeWorkspacePath": "frame.stories.ts"
}
```
Additional data:

```json
{
  "vscodeToolId": "copilot_createFile",
  "isHidden": false
}
```
Result:

```json
{
  "invocationMessage": "正在创建 [](file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/frame/stories/frame.stories.ts)",
  "pastTenseMessage": "已创建 [](file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/frame/stories/frame.stories.ts)",
  "isConfirmed": {
    "type": 1
  },
  "content": "",
  "textEditContent": "import Basic from '../examples/Basic.vue'\nimport Script from '../examples/Script.vue'\nimport SrcDoc from '../examples/SrcDoc.vue'\n\nexport default {\n  title: 'Components / Frame',\n  parameters: {\n    layout: 'fullscreen',\n  },\n}\n\nexport function basic() {\n  return {\n    components: { Basic },\n    template: '&lt;div style=\"--height: 200px\"&gt;&lt;Basic /&gt;&lt;/div&gt;',\n  }\n}\n\nexport function script() {\n  return {\n    components: { Script },\n    template: '&lt;div style=\"--height: 200px\"&gt;&lt;Script /&gt;&lt;/div&gt;',\n  }\n}\n\nexport function srcDoc() {\n  return {\n    components: { SrcDoc },\n    template: '&lt;SrcDoc /&gt;',\n  }\n}\n",
  "toolCallResult": null
}
```
Status: **completed**


</details>
</tool-use>

---

现在让我查看一下现有的 stories 文件结构，以确保我按照项目惯例编写。 现在我了解了 stories 的结构模式。让我为 `frame` provider 创建 stories 文件。 已为 `frame` provider 创建了 stories 文件 `frame.stories.ts`，包含三个 story：

- **basic** - 基础用法示例
- **script** - 带脚本注入的示例  
- **srcDoc** - 自定义 srcDoc 的示例

由于 `Basic.vue` 和 `Script.vue` 使用了 CSS 变量 `--height`，我在模板中包装了一个设置该变量的 div，确保 iframe 能正确显示高度。

---

_**User (2025-12-07 13:25Z)**_

帮我编写一下测试案例,可以使用 examples 下的例子

---

_**Agent (model copilot/claude-opus-4.5)**_

<tool-use data-tool-type="read" data-tool-name="copilot_readFile">
<details>
<summary>Tool use: **copilot_readFile** • 正在读取 [](file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/frame/components/Frame.vue)</summary>


读取 [](file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/frame/components/Frame.vue)

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="copilot_readFile">
<details>
<summary>Tool use: **copilot_readFile** • 正在读取 [](file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/focus-trap/test/focus-trap.test.ts#1-1)，行 1 到 80</summary>


读取 [](file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/focus-trap/test/focus-trap.test.ts#1-1)，行 1 到 80

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="copilot_readFile">
<details>
<summary>Tool use: **copilot_readFile** • 正在读取 [](file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/components/collapsible/test/collapsible.test.ts)</summary>


读取 [](file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/components/collapsible/test/collapsible.test.ts)

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="copilot_createDirectory">
<details>
<summary>Tool use: **copilot_createDirectory**</summary>


Parameters:

```json
{
  "file_path": "Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/frame/test",
  "relativeWorkspacePath": "test"
}
```
Additional data:

```json
{
  "vscodeToolId": "copilot_createDirectory",
  "isHidden": false
}
```
Result:

```json
{
  "invocationMessage": "正在创建 [](file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/frame/test)",
  "pastTenseMessage": "已创建 [](file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/frame/test)",
  "isConfirmed": {
    "type": 1
  },
  "content": "",
  "textEditContent": "",
  "toolCallResult": null
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="copilot_createFile">
<details>
<summary>Tool use: **copilot_createFile**</summary>


Parameters:

```json
{
  "file_path": "/Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/frame/test/frame.test.ts",
  "relativeWorkspacePath": "frame.test.ts"
}
```
Additional data:

```json
{
  "vscodeToolId": "copilot_createFile",
  "isHidden": false
}
```
Result:

```json
{
  "invocationMessage": "正在创建 [](file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/frame/test/frame.test.ts)",
  "pastTenseMessage": "已创建 [](file:///Users/elonehoo/Developer/destyler-dev/ui/packages/vue/src/providers/frame/test/frame.test.ts)",
  "isConfirmed": {
    "type": 1
  },
  "content": "",
  "textEditContent": "import { describe, expect, it, vi } from 'vitest'\nimport { render } from 'vitest-browser-vue'\nimport { page } from 'vitest/browser'\nimport { nextTick } from 'vue'\nimport Basic from '../examples/Basic.vue'\nimport Script from '../examples/Script.vue'\nimport SrcDoc from '../examples/SrcDoc.vue'\n\ndescribe('[frame] provider', () =&gt; {\n  it('should render content inside the iframe', async () =&gt; {\n    render(Basic)\n\n    await nextTick()\n\n    const iframe = page.getByTitle('Custom Frame')\n    await expect.element(iframe).toBeVisible()\n  })\n\n  it('should apply custom styles from head slot', async () =&gt; {\n    render(Basic)\n\n    await nextTick()\n\n    const iframe = page.getByTitle('Custom Frame')\n    await expect.element(iframe).toBeVisible()\n\n    const iframeElement = iframe.element() as HTMLIFrameElement\n    await vi.waitFor(() =&gt; {\n      const doc = iframeElement.contentDocument\n      expect(doc).not.toBeNull()\n      const styleElements = doc?.querySelectorAll('style')\n      expect(styleElements?.length).toBeGreaterThan(0)\n    })\n  })\n\n  it('should render content with custom srcDoc', async () =&gt; {\n    render(SrcDoc)\n\n    await nextTick()\n\n    const iframe = page.getByTitle('Custom Frame')\n    await expect.element(iframe).toBeVisible()\n\n    const iframeElement = iframe.element() as HTMLIFrameElement\n    await vi.waitFor(() =&gt; {\n      const doc = iframeElement.contentDocument\n      expect(doc).not.toBeNull()\n      // Check that the custom srcDoc with font links is applied\n      const links = doc?.querySelectorAll('link')\n      expect(links?.length).toBeGreaterThan(0)\n    })\n  })\n\n  it('should emit mount event when frame is ready', async () =&gt; {\n    const onMount = vi.fn()\n\n    render(Script)\n\n    await nextTick()\n\n    const iframe = page.getByTitle('Custom Frame')\n    await expect.element(iframe).toBeVisible()\n\n    // The Script example uses @mount event\n    await vi.waitFor(() =&gt; {\n      const iframeElement = iframe.element() as HTMLIFrameElement\n      const doc = iframeElement.contentDocument\n      expect(doc?.body).not.toBeNull()\n    })\n  })\n\n  it('should expose frameRef for external access', async () =&gt; {\n    render(Script)\n\n    await nextTick()\n\n    const iframe = page.getByTitle('Custom Frame')\n    await expect.element(iframe).toBeVisible()\n\n    const iframeElement = iframe.element() as HTMLIFrameElement\n    await vi.waitFor(() =&gt; {\n      expect(iframeElement.contentDocument).not.toBeNull()\n      expect(iframeElement.contentWindow).not.toBeNull()\n    })\n  })\n\n  it('should set CSS variables for frame dimensions', async () =&gt; {\n    render(Basic)\n\n    await nextTick()\n\n    const iframe = page.getByTitle('Custom Frame')\n    await expect.element(iframe).toBeVisible()\n\n    const iframeElement = iframe.element() as HTMLIFrameElement\n    await vi.waitFor(() =&gt; {\n      const heightVar = iframeElement.style.getPropertyValue('--height')\n      const widthVar = iframeElement.style.getPropertyValue('--width')\n      // Variables should be set (format: Xpx)\n      expect(heightVar).toMatch(/^\\d+px$/)\n      expect(widthVar).toMatch(/^\\d+px$/)\n    })\n  })\n\n  it('should teleport content to frame-root element', async () =&gt; {\n    render(Basic)\n\n    await nextTick()\n\n    const iframe = page.getByTitle('Custom Frame')\n    await expect.element(iframe).toBeVisible()\n\n    const iframeElement = iframe.element() as HTMLIFrameElement\n    await vi.waitFor(() =&gt; {\n      const doc = iframeElement.contentDocument\n      const frameRoot = doc?.querySelector('.frame-root')\n      expect(frameRoot).not.toBeNull()\n      // Content should be inside frame-root\n      const h1 = frameRoot?.querySelector('h1')\n      expect(h1?.textContent).toContain('Hello from inside the frame!')\n    })\n  })\n})\n",
  "toolCallResult": null
}
```
Status: **completed**


</details>
</tool-use>

---

